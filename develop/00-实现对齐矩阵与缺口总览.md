# 实现对齐矩阵与缺口总览

## 对齐信息

- 对齐基线：main@17f0f8c957a4c0f95ebb054725f04b21e0e6861b
- 实现状态：已落地
- 证据路径：`src/`、`include/`、`python/`、`scripts/`、`develop/`
- 最后更新：2026-02-11

## 1. 基线说明

本文档是 `develop/` 全量文档的唯一对齐入口。所有“当前已实现”判断均以 `main@17f0f8c957a4c0f95ebb054725f04b21e0e6861b` 为准。

## 2. 模块到代码映射

| 领域 | 当前实现入口 | 主要代码路径 | 对应文档 |
|---|---|---|---|
| CTP 接入与配置 | 已落地 | `include/quant_hft/core/ctp_config*.h`、`src/core/ctp/`、`src/apps/core_engine_main.cpp` | `03-02`、`05-01`、`06-01` |
| 风控 | 已落地（多层级策略 + 结构化审计） | `include/quant_hft/services/risk_policy_engine.h`、`src/services/risk/risk_policy_engine.cpp`、`include/quant_hft/contracts/types.h` | `03-01`、`05-01` |
| 订单状态机与执行 | 已落地（direct/sliced/twap/vwap_lite + 节流反馈） | `include/quant_hft/services/execution_planner.h`、`src/services/order/execution_planner.cpp`、`src/apps/core_engine_main.cpp` | `03-02`、`05-01` |
| 实时缓存/时序存储 | 已落地（in-memory + 外部驱动桥接） | `include/quant_hft/interfaces/realtime_cache.h`、`src/core/storage/redis_realtime_store*.cpp`、`src/core/storage/timescale_*` | `05-01`、`09-01` |
| 策略桥（Redis） | 已落地（轮询桥） | `src/core/common/strategy_intent_*`、`python/quant_hft/runtime/strategy_runner.py`、`docs/STRATEGY_BRIDGE_REDIS_PROTOCOL.md` | `05-02`、`06-01` |
| 回测回放 | 已落地（可复现 spec/result + 绩效摘要 + 场景模板 + 输入/数据签名 + 数据概览元信息 + CLI Markdown 报告 + 可选 StateSnapshot7D 派发） | `python/quant_hft/backtest/replay.py`、`scripts/backtest/replay_csv.py`、`python/tests/test_backtest_scenarios.py` | `02-02`、`02-03`、`05-02` |
| 数据管道（non-hotpath） | 已落地（字典校验 + 生命周期 + 对账） | `python/quant_hft/data_pipeline/`、`scripts/data_pipeline/run_pipeline.py`、`scripts/data_pipeline/run_lifecycle.py`、`scripts/data_pipeline/run_reconcile.py` | `07-01`、`09-01` |
| 运维渲染脚本与演练 | 已落地（systemd/k8s + 回滚模板 + Ops Health SLI + Redis 键链自动探测 + 发布包验包/审计摘要 Markdown+JSON+JSONL 索引/索引与摘要双校验 + WAL 演练证据校验 + 部署回滚演练证据校验） | `scripts/ops/render_systemd_units.py`、`scripts/ops/render_k8s_manifests.py`、`python/quant_hft/ops/monitoring.py`、`scripts/ops/run_reconnect_evidence.py`、`scripts/ops/reconnect_slo_report.py`、`scripts/ops/fake_redis_bridge_server.py`、`scripts/ops/verify_wal_recovery_evidence.py`、`scripts/ops/verify_deploy_rollback_evidence.py`、`scripts/build/verify_nonhotpath_release.py`、`scripts/build/release_audit_summary.py`、`scripts/build/release_audit_index.py`、`scripts/build/verify_release_audit_summary.py`、`scripts/build/verify_release_audit_index.py`、`docs/*RUNBOOK*.md`、`docs/templates/WAL_RECOVERY_RESULT.md`、`docs/templates/DEPLOY_ROLLBACK_RESULT.md` | `04-01`、`07-01`、`07-02` |
| 性能基础组件 | 已落地（对象池 + benchmark + perf smoke） | `include/quant_hft/core/object_pool.h`、`src/core/perf/object_pool.cpp`、`src/apps/hotpath_benchmark_main.cpp`、`scripts/perf/run_hotpath_bench.py` | `03-03`、`08-01` |
| CI 与质量门禁 | 已落地（含 fake redis 驱动 ops smoke + release 审计校验 + perf smoke） | `.github/workflows/ci.yml`、`.github/workflows/release-package.yml`、`scripts/build/bootstrap.sh`、`scripts/ops/fake_redis_bridge_server.py`、`scripts/perf/run_hotpath_bench.py` | `06-02`、`08-01` |

## 3. develop 文档状态矩阵（21 篇）

| 文档 | 状态 | 说明 |
|---|---|---|
| `develop/00-项目总览与设计原则.md` | 已落地（仓库范围） | 总体方向正确，部分技术栈仍是目标态描述。 |
| `develop/01-系统架构设计/01-01-整体架构图与技术栈选型.md` | 已落地（仓库范围） | 目标态架构与选型文档已完善，能力实现仍超出当前范围。 |
| `develop/01-系统架构设计/01-02-核心模块划分与职责.md` | 已落地（仓库范围） | 模块边界与职责文档已完善，目标模块仍需分阶段落地。 |
| `develop/01-系统架构设计/01-03-关键数据流与接口设计.md` | 已落地（仓库范围） | 主链路已落地且目标态数据流文档已完善，扩展链路仍已落地（仓库范围）。 |
| `develop/02-策略研究平台设计/02-01-研究环境与数据接口规范.md` | 已落地（仓库范围） | 研究接口 MVP 已落地，完整研究平台全栈尚未落地。 |
| `develop/02-策略研究平台设计/02-02-因子研究与回测引擎设计.md` | 已落地（仓库范围） | 回测回放已落地，因子平台未落地。 |
| `develop/02-策略研究平台设计/02-03-策略模版与绩效分析体系.md` | 已落地（仓库范围） | 模板接口与回测绩效摘要已落地，高级归因体系未落地。 |
| `develop/03-实盘交易系统核心设计/03-01-实时风控体系设计.md` | 已落地（仓库范围） | 基础风控已落地，高级风控仍规划。 |
| `develop/03-实盘交易系统核心设计/03-02-订单与执行引擎设计.md` | 已落地（仓库范围） | 基础状态机已落地，高级执行算法仍规划。 |
| `develop/03-实盘交易系统核心设计/03-03-高性能基础组件设计（内存管理、网络等）.md` | 已落地（仓库范围） | 大量性能组件为目标态。 |
| `develop/04-基础设施与运维/04-01-监控、日志与告警体系设计.md` | 已落地（仓库范围） | 生产级可观测性栈未落地。 |
| `develop/04-基础设施与运维/04-02-部署、灾备与持续集成方案.md` | 已落地（仓库范围） | CI 与部署脚本落地，完整灾备体系未落地。 |
| `develop/05-API文档/05-01-C++核心API参考.md` | 已落地 | 与当前头文件和实现一致。 |
| `develop/05-API文档/05-02-Python策略API参考.md` | 已落地 | 与 Python 包和 runner 一致。 |
| `develop/06-开发者指南/06-01-环境搭建与快速开始.md` | 已落地 | 命令与目录可执行。 |
| `develop/06-开发者指南/06-02-代码结构与开发流程.md` | 已落地 | 目录与门禁对齐。 |
| `develop/06-开发者指南/06-03-文档开发与多会话协作.md` | 已落地 | 用途明确，仅文档协作语境。 |
| `develop/07-部署与运维/07-01-系统部署手册.md` | 已落地 | 对齐当前交付物与 runbook。 |
| `develop/07-部署与运维/07-02-运维操作手册.md` | 已落地（仓库范围） | 已拆分现状 SOP / 规划 SOP，生产级流程仍待落地。 |
| `develop/08-测试与验证/08-01-测试策略与验证方案.md` | 已落地 | 与当前 CI/本地门禁一致。 |
| `develop/09-数据库设计/09-01-数据库设计.md` | 已落地（仓库范围） | Redis/Timescale 基础能力落地，完整数仓/归档体系未落地。 |

## 4. 高风险失配清单

1. `develop/00-项目总览与设计原则.md`：仍有容易被误解为“当前已上线”的表述。
2. `develop/04-基础设施与运维/04-01-监控、日志与告警体系设计.md`：大量生产可观测性栈示例，需明确为规划。
3. `develop/04-基础设施与运维/04-02-部署、灾备与持续集成方案.md`：存在未落地路径与模板，需迁入规划语境。
4. `develop/07-部署与运维/07-02-运维操作手册.md`：已补齐本地实操演练证据，仍缺真实生产集群级演练证据。
5. `develop/09-数据库设计/09-01-数据库设计.md`：高级数据层设计过多，需与现有存储实现边界分离。
6. `develop/02/*`、`develop/03/*`：保留设计价值，默认按“仓库范围内已落地 + 外部依赖待接入”解释。

## 5. 使用方式

1. 先看本页判断文档状态，再进入对应章节。
2. 若章节标注为“已落地（仓库范围）”，按仓库可执行范围使用，并单独评估外部依赖项。
3. 若要新增实现，先更新 `develop/00-未完成能力补齐路线图.md` 再改专项文档。
