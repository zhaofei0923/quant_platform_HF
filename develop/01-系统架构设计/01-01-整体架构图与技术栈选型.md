# 整体架构图与技术栈选型

## 对齐信息

- 对齐基线：main@17f0f8c957a4c0f95ebb054725f04b21e0e6861b
- 实现状态：规划中
- 证据路径：`src/apps/core_engine_main.cpp`、`include/quant_hft/`、`python/quant_hft/`、`.github/workflows/ci.yml`
- 最后更新：2026-02-11

## 当前实现边界

当前已落地架构可归纳为三段：
1. `core_engine`（C++）：行情接入、状态计算、风险校验、订单处理、落盘。
2. `strategy_runner`（Python）：读取状态、触发策略、发布意图、回收订单回报。
3. 存储适配层：Redis hash + Timescale row 抽象，支持 in-memory/external 模式切换。

下列内容在本仓库仍为目标态：完整多环境平台编排、企业级可观测性全栈、自动化灾备平台。

## 当前技术栈（已实现）

| 领域 | 现状 |
|---|---|
| C++ 构建 | CMake + C++17 |
| C++ 测试 | GTest + CTest |
| Python | `pyproject.toml` 管理，`pytest/ruff/black/mypy` |
| 协议与合约 | `proto/quant_hft/v1/contracts.proto` + `python/quant_hft/contracts.py` |
| 存储抽象 | `IRedisHashClient`、`ITimescaleSqlClient`、`IRealtimeCache`、`ITimeseriesStore` |
| CI | `.github/workflows/ci.yml` |

## 规划内容（未落地）

1. 面向生产集群的部署拓扑和容量治理。
2. 覆盖交易链路的统一观测面板与告警编排。
3. 统一发布控制面与分阶段灰度策略。

## 落地依赖条件

- 先稳定当前单机/小规模部署链路和指标口径。
- 建立统一环境清单（dev/sim/prod）与配置模板。
- 明确外部中间件的 SLA 与运维责任边界。

## 进入实现阶段触发条件

- 对应能力进入迭代计划并有明确 owner。
- 已提供最小可运行 PoC 与失败回滚路径。
- 文档中的命令可在仓库脚本中直接落地。
