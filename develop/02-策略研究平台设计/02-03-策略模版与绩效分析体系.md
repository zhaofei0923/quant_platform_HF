# 策略模版与绩效分析体系

## 对齐信息

- 对齐基线：main@17f0f8c957a4c0f95ebb054725f04b21e0e6861b
- 实现状态：部分落地
- 证据路径：`python/quant_hft/strategy/base.py`、`python/quant_hft/runtime/engine.py`、`python/quant_hft/backtest/replay.py`、`python/tests/test_runtime_engine.py`、`python/tests/test_backtest_scenarios.py`
- 最后更新：2026-02-11

## 当前实现边界

当前仅落地策略模板最小接口与运行时分发：
- `StrategyBase`：`on_bar/on_state/on_order_event`
- `StrategyRuntime`：多策略注册与事件分发
- `strategy/demo.py`：最小示例策略
- 回测绩效摘要：`BacktestPerformanceSummary`（`total_pnl/max_drawdown/order_status_counts`）

完整绩效分析体系（归因、风险分解、稳定性监控）尚未落地。

## 已落地内容

1. 策略实现规范：继承 `StrategyBase` 并返回 `SignalIntent`。
2. 运行时管理：`StrategyRuntime.add_strategy` 与事件广播。
3. 回测与实盘桥共享同一策略接口。
4. 回测标准化结果：`BacktestRunResult` 在 deterministic 模式输出统一绩效字段。

## 规划内容（未落地）

1. 统一绩效指标字典（收益、回撤、胜率、资金占用效率）。
2. 策略分层模板（趋势、套利、做市）与参数规范。
3. 策略上线评审与灰度退出机制。

## 落地依赖条件

- 先冻结策略输出合约，保证跨模块可比性。
- 统一绩效计算口径与时间窗口定义。
- 建立策略版本与配置变更审计机制。

## 进入实现阶段触发条件

- 至少有一套指标在回测和实盘闭环中均可验证。
- 模板扩展不会破坏现有 `StrategyBase` 兼容性。
- 文档中“已落地”条目可追溯到测试样例。
