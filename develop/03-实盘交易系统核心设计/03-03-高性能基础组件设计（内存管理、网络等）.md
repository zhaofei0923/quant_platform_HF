# 高性能基础组件设计（内存管理、网络等）

## 对齐信息

- 对齐基线：main@17f0f8c957a4c0f95ebb054725f04b21e0e6861b
- 实现状态：规划中
- 证据路径：`src/core/storage/storage_client_pool.cpp`、`src/core/ctp/query_scheduler.cpp`、`tests/unit/core/storage_client_pool_test.cpp`
- 最后更新：2026-02-11

## 当前实现边界

当前仓库中可归类为“基础性能组件”的已实现部分：
- `QueryScheduler`：查询限流与队列调度。
- `StorageClientPool`：Redis/Timescale 客户端池化与重试。
- `TimescaleBufferedEventStore`：后台批量刷写。

尚未落地：自定义内存池、零拷贝网络栈、NUMA 亲和调度等高级组件。

## 规划内容（未落地）

1. 高频内存管理策略（对象池、分配器优化）。
2. 网络 I/O 优化（批处理、协议栈调优）。
3. 压测基线平台与性能回归门禁。

## 落地依赖条件

- 先建立统一性能指标与基准测试方法。
- 明确热点路径瓶颈，避免过早优化。
- 保证优化前后业务语义一致。

## 进入实现阶段触发条件

- 有可量化瓶颈数据支撑。
- 优化方案配套回归与回滚路径。
- 性能收益达到预设阈值后再合并。
